#!/bin/bash

# ─ Copyright Notice ───────────────────────────────────────────────────
#
# Copyright 2000-2022 Hans Deragon - GPL 3.0 licence.
#
# Hans Deragon (hans@deragon.biz) owns the copyright of this work.
#
# It is released under the GPL 3 licence which can be found at:
#
#     https://www.gnu.org/licenses/gpl-3.0.en.html
#
# ─────────────────────────────────────────────────── Copyright Notice ─

TITLE=$1
KEY=$2

if [ -z "${TITLE}" ]; then
  echo "ERROR:  Title needs to be provided.  Aborted."
  exit 1
fi

if [ -z "${KEY}" ]; then
  echo "ERROR:  Key needs to be provided.  Aborted."
  exit 2
fi

STATE_CURRENT=`gconftool-2 -g ${KEY}`

echo -n "${TITLE} current state is ${STATE_CURRENT}.  "
read -p "Do you want to toogle it? (y/n) " ANSWER

if [ "${ANSWER}" = "y" ]; then
  if [ "${STATE_CURRENT}" = "true" ]; then
    STATE_NEW="false"
  else
    STATE_NEW="true"
  fi

  gconftool-2 -s -t bool ${KEY} ${STATE_NEW}
  echo "${TITLE} switch to ${STATE_NEW}."
else
  echo "${TITLE} remains unchanged."
fi
